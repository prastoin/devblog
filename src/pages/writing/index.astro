---
// Component Imports
import BaseHead from '../../components/kit/BaseHead.astro';
import BaseBody from '../../components/kit/BaseBody.astro';
import '../../styles/global.css'

import WritingPostPreview from '../../components/writing/WritingPostPreview.astro';
import { PostFrontmatter } from './PostsType';

const title = 'prastoin | writing';
const description = "Writing articles about things I'm interested in";
const permalink = 'https://example.com/';

// Data Fetching: List all Markdown posts in the repo.
const allPosts = (await Astro.glob<PostFrontmatter>('./posts/*.md')).sort(
    (a, b) =>
        new Date(b.frontmatter.publishDate).valueOf() - new Date(a.frontmatter.publishDate).valueOf(),
);

// Full Astro Component Syntax:
// https://docs.astro.build/core-concepts/astro-components/
---

<html lang="en">
    <head>
        <BaseHead title={title} description={description} permalink={permalink} />
    </head>

    <BaseBody>
        <main
            class="w-full flex flex-col self-center prose dark:prose-invert sm:prose-sm md:prose-lg lg:prose-xl"
        >
            <section class="intro">
                <h1 class="latest">Articles</h1>
                <p>{description}</p>
            </section>
            <section aria-label="Blog post list">
                {allPosts.map(({ frontmatter: postInformation, url}) => <WritingPostPreview postInformation={{
                    ...postInformation,
                    url
                }} />)}
            </section>
        </main>
    </BaseBody>
</html>
